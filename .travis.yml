# Config file for automatic testing at travis-ci.org
#
# https://docs.travis-ci.com/user/languages/python/
# https://docs.travis-ci.com/user/reference/overview/
# https://docs.travis-ci.com/user/environment-variables/
#

sudo: false
dist: trusty

language: python

python:
  - "3.6"

install:
  - 
  # Work-a-round for https://github.com/travis-ci/travis-ci/issues/8589
  - ls /opt/python/
  - /opt/python/3.6/bin/python --version
  - /opt/python/3.6.3/bin/python --version
  
  - /opt/python/3.6.3/bin/python pylucid/pylucid_boot.py boot ~/PyLucid-env

  - cd ~/PyLucid-env
  - ls -la bin
  - source bin/activate

  - cp -Rfv ${TRAVIS_BUILD_DIR} ~/PyLucid-env/src/pylucid
  - cd ~/PyLucid-env/src/pylucid
  - pip install -e .
  - pip install -r pylucid/requirements/ci_installation.txt

  - pylucid_admin pip_freeze
  - pylucid_admin pytest
