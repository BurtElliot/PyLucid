{% extends "admin/base_site.html" %}

{% block content %}
<form action="{{ form_url }}" method="post" id="edit_page_form" class="pylucid_form">
<p>
    <small>
    Note: A new page can only create the default system language.
    This is <strong>{{ default_lang_entry.description }}</strong>. You can translate it later.
    </small>
</p>

{% if not sites|length_is:"1" %}
<p>
    <small>This new content page will be create on site: '<strong>{{ current_site }}</strong>'.</small>
</p>
{% endif %}

<ul id="action_buttons">
    <li>
        <input type="submit" name="save" value="{% trans 'save' %}" />
        <input type="reset" class="button" name="abort" value="{% trans 'abort' %}" />
    </li>
    <li>
     {% if help_link %}
     <a href="{{ help_link }}" class="openinwindow" title="{% trans 'markup help page' %}">
         <button type="button">{% trans 'markup help' %}</button>
     </a>
     {% endif %}
    </li>
</ul>

{% if has_errors %}
<fieldset><legend>{% trans 'Form errors:' %}</legend>
{% for form in all_forms %}      
    {% include "admin/pylucid/includes/form_errorlist.html" %}
{% endfor %}
</fieldset>
{% endif %}

<fieldset>
  <legend>{% trans 'Language:' %} <strong>{{ default_lang_entry.description }}</strong></legend>
  <h2 class="form_collapse">PageContent</h2>
    {% with pagecontent_form.content as field %}
    <div title="{{ field.help_text }}" class="field {{ field.html_name }}">
        <label for="{{ field.auto_id }}"{% if field.errors %} class="error"{% endif %}>
            {% if field.field.required %}<strong>{{ field.label }}</strong>{% else %}{{ field.label }}{% endif %}
            :       
            {% if field.errors %}
                {% for error in field.errors %}{{ error|escape }}{% endfor %}
            {% endif %}
        </label>
         <div class="helper_buttons">
             <input type="submit" id="preview" name="preview" value="{% trans 'markup preview' %}" />
             <a href="{{ pagelinklist_url }}" class="openinwindow" title="{% trans 'List of all pages for creating links' %}">
                 <button type="button" class="button">{% trans 'page list' %}</button>
             </a>
             <a href="{{ taglist_url }}" class="openinwindow" title="{% trans 'List of all available PyLucid template tags' %}">
                 <button type="button" class="button">{% trans 'tag list' %}</button>
             </a>
             <button type="button" class="button resize_textarea" id="bigger_{{ field.auto_id }}" title="{% trans 'makes the textarea bigger' %}">
                 +
             </button>
             <button type="button" class="button resize_textarea" id="smaller_{{ field.auto_id }}" title="{% trans 'makes the textarea smaller' %}">
                 -
             </button>
         </div>
        <fieldset id="preview_fieldset">
            <legend>{% trans 'Preview' %}</legend>
            <div id="edit_page_preview">TODO</div>
        </fieldset>
        {{ field }}
        <div class="field_help_text">{{ field.help_text }}</div>
    </div>
    {% endwith %}
    
    {% with pagecontent_form.markup as field %}
        {% include "admin/pylucid/includes/form_field.html" %}
    {% endwith %}
</fieldset>

<fieldset><legend>{% trans 'Language' %}: <strong>{{ default_lang_entry.description }}</strong></legend>
    <h2 class="form_collapse">PageMeta</h2>
    {% with pagemeta_form as form %}
        {% include "admin/pylucid/includes/pylucid_formset.html" %}
    {% endwith %}
</fieldset>

{% include "page_admin/includes/fieldsets_pagetree.html" %}

</form>
{% endblock %}
